# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a custom Home Assistant Lovelace UI card called `linear-gauge-card`. It implements a modern, feature-rich linear gauge display (horizontal bar) for Home Assistant dashboards, serving as an enhanced alternative to existing cards like bar-card.

## Architecture

### Core Components

- **Card**: A custom element extending `LovelaceCard` from Home Assistant's UI framework
- **Editor**: A configuration panel in Home Assistant's Lovelace UI for configuring the card
- **Renderer**: Handles the visual rendering of the linear gauge using SVG or HTML5 Canvas

### Project Structure

```
linear-gauge-card/
├── src/
│   ├── main.ts          # Card entry point, registers the custom element
│   ├── card.ts          # Main card class implementing LovelaceCard
│   ├── editor.ts        # Editor configuration UI
│   └── types.ts         # TypeScript type definitions
├── dist/                # Built output (generated by rollup)
├── package.json
├── rollup.config.js     # Build configuration
├── tsconfig.json
└── hacs.json            # HACS integration metadata
```

### Key Dependencies

- `lit` - Reactive UI rendering library (primary dependency)
- `home-assistant-js-websocket` - WebSocket connection to Home Assistant
- `rollup` - Module bundler

### Configuration

The card receives configuration via Home Assistant's Lovelace card config system. Key config options:

| Option | Type | Description |
|--------|------|-------------|
| `entity` | string | The entity ID to display |
| `max` | number | Maximum value for the gauge |
| `min` | number | Minimum value for the gauge |
| `title` | string | Optional title text |
| `unit` | string | Optional unit display |
| `colors` | array | Color configuration for value ranges |
| `show_value` | boolean | Whether to show the numeric value |
| `show_label` | boolean | Whether to show the entity label |
| `show_icon` | boolean | Whether to show the entity icon |
| `zero_indicator` | list of options | One of 'none', 'line', 'arrow' |
| `sharp_zero_edge` | boolean | Flatten the fill's edge at zero (default: false) |
| `animated` | boolean | Animate value changes (default: true) |
| `icon_color` | string | CSS color for the entity icon (default: HA theme color) |


## Development Commands

```bash
# Install dependencies
npm install

# Build for production
npm run build

# Build for development (with sourcemaps)
npm run build:dev

# Watch mode for development
npm run watch

# Lint TypeScript files
npm run lint

# Lint and fix
npm run lint:fix

# Format code with Prettier
npm run format
```

## Testing

Home Assistant cards are tested by loading them in a HA instance:

1. Build the card: `npm run build`
2. Copy `dist/linear-gauge-card.js` to `/config/www/linear-gauge-card/`
3. Add resource in Lovelace: `/local/linear-gauge-card/linear-gauge-card.js`
4. Add the card to your dashboard

For HACS development:
1. Link your repo in HACS
2. Restart Home Assistant
3. The card will be available in the frontend

## References

- [Home Assistant Custom Card Docs](https://developers.home-assistant.io/docs/frontend/custom-ui/custom-card)
